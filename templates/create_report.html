<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- --------- UNICONS ---------- -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">

    <!-- --------- CSS ---------- -->
    <link rel="stylesheet" href="static/css/style.css">

    <!-- --------- FAVICON ---------- -->
    <link rel="shortcut icon" href="static/images/InspectMind_Logo.png" type="image/x-icon">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" />
    <title>InspectMind</title>
</head>

<body>
    <div class="container">
        <!-- --------------- HEADER --------------- -->
        <nav id="header">
            <div class="nav-logo">
                
                <p class="nav-name">InspectMind</p>
            </div>
            <div class="nav-menu" id="myNavMenu">
                <ul class="nav_menu_list">
                    <li class="nav_list">
                        <a href="/" class="nav-link active-link">Home</a>
                        <div class="circle"></div>
                    </li>
                </ul>
            </div>
            <div class="create-report">
                <button class="btn"><a href="/create_report">New Report</a></i></button>
            </div>
            <div class="nav-menu-btn">
                <i class="uil uil-bars" onclick="myMenuFunction()"></i>
            </div>
        </nav>
        <!-- -------------- MAIN ---------------- -->
        <main class="wrapper">
            <!-------------- create-report ---------------------->
            <section class="section" id="create-report">
                <div class="top-header">
                    <h1>Create Inspection Report</h1>
                    <span>Upload videos, images, and audio files to generate a detailed inspection report</span>
                </div>
                <form id="generate-report-form" method="post" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col">
                            <div class="upload-info">
                                <h2>Upload Files <i class="uil uil-corner-right-down"></i></h2>
                                <div class="form-group">
                                    <label for="report-name">Report Name</label>
                                    <input type="text" id="report-name" name="report-name"
                                        placeholder="Enter report name" value="{{ report_name }}" required>
                                </div>
                                <div class="file-input">
                                    <label for="videos">Videos</label>
                                    <input type="file" id="videos" name="videos" multiple accept="video/*">
                                </div>
                                <div class="file-input">
                                    <label for="images">Images</label>
                                    <input type="file" id="images" name="images" multiple accept="image/*">
                                </div>
                                <div class="file-input">
                                    <label for="audios">Audios</label>
                                    <input type="file" id="audios" name="audios" multiple accept="audio/*">
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="sample-report">
                                <h2>Sample Report <i class="uil uil-corner-right-down"></i></h2>
                                <p>Upload a sample report to use as a template</p>
                                <div class="file-input">
                                    <label for="sample-report">Sample Report</label>
                                    <input type="file" id="sample-report" name="sample-report" accept=".pdf,.doc,.docx">
                                </div>
                                <div class="form-group">
                                    <label for="report-prompt">Give prompt</label>
                                    <input type="text" id="report-prompt" name="report-prompt"
                                        placeholder="Enter the prompt" value="{{ report_prompt }}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <center>
                        <div class="form-button" id="generate-btn">
                            <button type="submit" class="btn" id="generate-report-button">Generate Report <i
                                    class="uil uil-file-alt"></i></button>
                        </div>
                    </center>
                </form>
            </section>
            <!--------------Report Rendering ---------------------->
            {% if report_summary and report_details %}
            <section class="section" id="llm-output">
                <div class="top-header">
                    <h1>Inspection Report</h1>
                    <span>Generated report based on the uploaded files</span>
                </div>
                <div class="output-content">
                    <h2>Summary</h2>
                    <p>{{ report_summary }}</p>
                    <h2>Details</h2>
                    {% for detail in report_details %}
                    <div class="report-section">
                        <h3>{{ detail.title }}</h3>
                        <p>{{ detail.content }}</p>
                    </div>
                    {% endfor %}
                </div>
            </section>

            <div class="create-report" id="download-btn">
                <button class="btn" onclick="downloadPDF()">Download Inspection Report as PDF</button>
            </div>

            {% endif %}

        </main>
        <!-- --------------- FOOTER --------------- -->
        <footer class="footer-distributed">
            <div class="footer-left">
                <h3><span>InspectMind</span></h3>

                <p class="footer-links">
                    <a href="#home">Home</a>
                    |
                    <a href="#about">About</a>
                    |
                    <a href="#contact">Contact</a>
                </p>

                <p class="footer-company-name">
                    Copyright Â© 2024 <strong>InspectMind</strong> All rights reserved
                </p>
            </div>

            <div class="footer-center">
                <div>
                    <i class="fa fa-map-marker"></i>
                    <p><span></span>Hyderabad, Telangana, India</p>
                </div>

                <div>
                    <i class="fa fa-phone"></i>
                    <p>+250 708 770 000</p>
                </div>
                <div>
                    <i class="fa fa-envelope"></i>
                    <p><a href="mailto:admin@inspectmind.ai">admin@inspectmind.ai</a></p>
                </div>
            </div>
            <div class="footer-right">
                <p class="footer-company-about">
                    <span>About the company</span>
                    <strong>InspectMind</strong>, Instant, accurate, AI inspection reports
                    Capture site information through voice and pictures on your phone, and let our AI generate your
                    inspection report by the
                    time you leave the jobsite.
                </p>
                <div class="footer-icons">
                    <a href="#"><i class="fa fa-facebook"></i></a>
                    <a href="#"><i class="fa fa-instagram"></i></a>
                    <a href="#"><i class="fa fa-linkedin"></i></a>
                    <a href="#"><i class="fa fa-twitter"></i></a>
                    <a href="#"><i class="fa fa-youtube"></i></a>
                </div>
            </div>
        </footer>
    </div>
    <!-- ----- G JS Link ----- -->
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
    <!-- ----- SCROLL REVEAL JS Link----- -->
    <script src="https://unpkg.com/scrollreveal"></script>
    <!-- ----- MAIN JS ----- -->
    <script src="static/js/main.js" defer></script>
    <!------------------ LIBRARY TO DOWNLOAD THE INSPECTION REPORT  ----------------->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <!-- JS CODE TO NOT TO ATTEMPT MULTIPLE SUBMISSION TO GENARATE REPORT UNTIL ONE IS COMPLETED -->
    <script>
        document.getElementById('generate-report-form').addEventListener('submit', function () {
            var generateButton = document.getElementById('generate-report-button');
            generateButton.disabled = true;
            generateButton.innerHTML = 'Generating Report... <i class="uil uil-spinner-alt"></i>';
        });
    </script>

</body>

</html>